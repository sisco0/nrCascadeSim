###############################################################
#
#
# Makefile for cdmsRPF
###############################################################

#everybody here needs root
ROOTFLAGS=`root-config --cflags`

#we also need cdmsbats
CDMSBATSDIR=/data/chocula/villaa/cdmsbats_release/cdmsbats
BUILDDIR=$(CDMSBATSDIR)/BUILD
INCDIR=$(BUILDDIR)/include
LIBDIR=$(BUILDDIR)/lib
LINALGINCDIR=$(BUILDDIR)/linalgebra
CDMSBATSINC= -IMersenne -I$(INCDIR) -I$(LINALGINCDIR)/linalgebra -I$(LINALGINCDIR)/boost-numeric/include
CDMSBATSLIB= -L. -L$(LIBDIR)

NOISELIB= ../noiselib

#trick for getting the git version in the code
GIT_VERSION = $(shell sh -c 'git describe --abbrev=4 --always')

CFLAGS += -D__GIT_VERSION=\"$(GIT_VERSION)\"

#CPPFLAGS+= $(ROOTFLAGS)
#CPPFLAGS+= $(CDMSBATSINC)

all: cascadePrint

cascadePrint: libncap.so cascadePrint.cpp
	g++ -fPIC -Wl,-rpath=./ $(CFLAGS) $(CDMSBATSINC) $(CDMSBATSLIB) cascadePrint.cpp `root-config --cflags --glibs` -lncap -o cascadePrint 


clean:
	rm -f cascadePrint
	rm -f *.o
	rm -f *.so
